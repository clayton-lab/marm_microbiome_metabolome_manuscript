# Repository for the marm_microbiome_metabolome_manuscript

## Overview
This repository hosts the software used to analyze and generate data for the marm_microbiome_metabolome manuscript. The repo consists of 3 directories that are described below:
- **src** — The code used to analyze 16S and metabolomics data. The majority of the code is contained within a Jupyter notebook (marm-microbiome-metabolome-manuscript.ipynb), with some helper functions in the files called q2Handler.py and rFunctions.R. An additional Cytoscape file (marm-micro-metab-associations.cys) contains the portion of analysis that took place within Cytoscape.
- **env** — The Conda environment that was used to run the code in src. Contains a .yaml file that can be used to recreate the environment. While Dokdo was installed via pip, the process for doing so was slightly unconventional. Further details can be found in Dokdo's [documentation](https://dokdo.readthedocs.io/en/latest/readme.html).
- **results** — Processed 16S and metabolomics data, as well as the output files from several statistical analysis tools. The files in this folder should be sufficient to recreate any figures and tables present in the published manuscript, with the caveat that additional steps in Cytoscape may be necessary for some figures. For convenience, the exported Cytoscape .csv files that were used for power-law fitting are included in this folder as well.

## File Names
Many of the files in this repository contain variants of "microbe" in their name, as in microbe-metabolite, microbe-microbe, etc. These were the original file names used during the analysis, but the terminology was switched to bacteria-bacteria, bacteria-metabolite, etc. when writing the manuscript to clarify that only bacteria were present in the data, and not other microbes (e.g., archaea, fungi). Metabolite is occasionally abbreviated to "metab" as well.

## Cytoscape Analysis
Upon opening the .cys file in Cytoscape, there are multiple networks available. "associations.tsv" is the starting network graph with all bacteria-bacteria, bacteria-metabolite, and metabolite associations. This graph was split into multiple subgraphs with Cytoscape's filter. The indentations in the list of networks should make it clear which neworks are subgraphs and which ones are parents of those subgraphs. For instance, the network "mcode_clusters.tsv" is a subgraph of "microbe_microbe.tsv", which in turn is a subgraph of "associations.tsv". The 3 graphs used for the majority of the analysis were "metab_metab", "microbe_microbe", and "microbe_metab", which are subgraphs consisting of metabolite-metabolite, bacteria-bacteria, and bacteria-metabolite associations, respectively. The only networks that aren't direct subgraphs of associations.tsv are microbe_microbe_largest_component.tsv and microbe_metab_largest_component.tsv. These are respective subgraphs of microbe_microbe.tsv and microbe_metab.tsv containing only the largest connected component of their parent graphs, and they were used when calculating betweenness centrality for the Keystone Candidate Score.
